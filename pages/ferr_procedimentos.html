<!DOCTYPE html>
<html lang="pt-BR" class="dark">
<head>
    <meta charset="UTF-8">
    <title>Procedimentos | ODIN OS</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>

    <script>
        tailwind.config = { darkMode: 'class', theme: { extend: { fontFamily: { sans: ['Inter', 'sans-serif'], mono: ['JetBrains Mono', 'monospace'], }, colors: { dark: { 900: '#050507', 800: '#0E0E12', 700: '#1A1A23', 600: '#2A2A35' }, neon: { cyan: '#00F0FF', violet: '#7000FF', green: '#00FF94', orange: '#F59E0B' } } } } }
    </script>
    <style>
        /* Converted Tailwind @apply rules to plain CSS to avoid unknown @apply errors */
        .glass-panel {
            background-color: rgba(14,14,18,0.6); /* bg-dark-800/60 */
            -webkit-backdrop-filter: blur(12px);
            backdrop-filter: blur(12px); /* backdrop-blur-xl */
            border: 1px solid #1A1A23; /* border-dark-700 */
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05); /* shadow-lg approximation */
        }
        /* Estilo do Item da Lista Lateral */
        .nav-item {
            width: 100%;
            text-align: left;
            padding: 0.75rem 1rem; /* py-3 px-4 */
            border-radius: 0.5rem; /* rounded-lg */
            font-size: 0.875rem; /* text-sm */
            color: #9CA3AF; /* text-gray-400 */
            transition: all .15s ease;
            border-left: 2px solid transparent; /* border-l-2 border-transparent */
            cursor: pointer;
            margin-bottom: 0.25rem; /* mb-1 */
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .nav-item:hover {
            background-color: #0E0E12; /* dark-800 */
            color: #ffffff;
        }
        .nav-item.active {
            background-color: #0E0E12; /* bg-dark-800 */
            color: #F59E0B; /* text-neon-orange */
            border-left-color: #F59E0B; /* border-l-neon-orange */
            font-weight: 700;
        }
        /* √Årea de Conte√∫do */
        .content-area {
            color: #D1D5DB; /* text-gray-300 */
            line-height: 1.625; /* leading-relaxed */
            font-size: 0.875rem; /* text-sm */
        }
        .content-area strong {
            color: #ffffff;
            font-weight: 700;
        }
        .badge-sector {
            font-size: 10px;
            text-transform: uppercase;
            font-weight: 700;
            padding: 0.25rem 0.5rem; /* py-1 px-2 */
            border-radius: 0.25rem;
            border: 1px solid rgba(255,255,255,0.06);
            display: inline-block;
        }
        body { background-color: #050507; color: #D1D5DB; overflow: hidden; } /* Trava scroll body */
        
        /* Scrollbars finas */
        .custom-scroll::-webkit-scrollbar { width: 6px; }
        .custom-scroll::-webkit-scrollbar-track { background: #0E0E12; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #374151; border-radius: 3px; }
        .custom-scroll::-webkit-scrollbar-thumb:hover { background: #F59E0B; }
    </style>
</head>
<body class="flex flex-col h-screen">
    
    <div id="header-placeholder"></div>

    <main class="flex-grow pt-24 md:pt-32 px-4 md:px-6 container mx-auto h-full flex flex-col pb-6">
        
        <div class="flex flex-col md:flex-row justify-between items-end mb-6 border-b border-dark-700 pb-4 flex-none">
            <div>
                <div class="flex items-center gap-2 text-neon-orange mb-1 font-mono text-xs tracking-widest uppercase">
                    <div class="w-2 h-2 bg-neon-orange rounded-full animate-pulse"></div> Knowledge Base
                </div>
                <h1 class="text-3xl font-black text-white tracking-tight">Procedimentos</h1>
            </div>
            <div class="relative w-full md:w-80 mt-4 md:mt-0">
                <i class="fas fa-search absolute left-4 top-1/2 -translate-y-1/2 text-gray-500"></i>
                <input type="text" id="search-proc" placeholder="Filtrar t√≥picos..." class="w-full bg-dark-800 border border-dark-600 rounded-full pl-10 pr-4 py-2 text-sm text-white focus:border-neon-orange outline-none transition">
            </div>
        </div>

        <div class="flex flex-col md:flex-row gap-6 flex-grow overflow-hidden h-full">
            
            <div class="w-full md:w-1/3 lg:w-1/4 flex flex-col bg-dark-900/50 border-r border-dark-700 pr-2 overflow-hidden">
                <div class="flex gap-2 mb-4 overflow-x-auto pb-2 flex-none scrollbar-hide">
                    <button onclick="filterList('all')" class="px-3 py-1 rounded-full text-xs font-bold bg-neon-orange text-dark-900 hover:opacity-80 whitespace-nowrap filter-chip active" data-filter="all">Todos</button>
                    <button onclick="filterList('secretaria')" class="px-3 py-1 rounded-full text-xs font-bold bg-dark-800 text-gray-400 hover:text-white border border-dark-600 whitespace-nowrap filter-chip" data-filter="secretaria">Secretaria</button>
                    <button onclick="filterList('financeiro')" class="px-3 py-1 rounded-full text-xs font-bold bg-dark-800 text-gray-400 hover:text-white border border-dark-600 whitespace-nowrap filter-chip" data-filter="financeiro">Financeiro</button>
                    <button onclick="filterList('pedagogico')" class="px-3 py-1 rounded-full text-xs font-bold bg-dark-800 text-gray-400 hover:text-white border border-dark-600 whitespace-nowrap filter-chip" data-filter="pedagogico">Pedag√≥gico</button>
                </div>
                
                <div id="nav-list" class="overflow-y-auto custom-scroll flex-grow space-y-1 pr-2">
                    </div>
            </div>

            <div class="w-full md:w-2/3 lg:w-3/4 bg-dark-800/30 rounded-xl border border-dark-700 p-6 md:p-10 overflow-y-auto custom-scroll relative">
                
                <div id="content-placeholder" class="flex flex-col items-center justify-center h-full text-gray-600">
                    <i class="fas fa-book-open text-6xl mb-4 opacity-20"></i>
                    <p>Selecione um t√≥pico √† esquerda para ler.</p>
                </div>

                <div id="content-detail" class="hidden animate-[fadeIn_0.3s]">
                    <div class="flex justify-between items-start mb-6 pb-6 border-b border-dark-700">
                        <div>
                            <span id="detail-badge" class="badge-sector bg-gray-700 text-gray-300 border-gray-600 mb-3 inline-block">SETOR</span>
                            <h2 id="detail-title" class="text-3xl font-black text-white leading-tight">T√≠tulo do Procedimento</h2>
                        </div>
                        <button onclick="copyContent()" class="text-gray-500 hover:text-neon-orange transition" title="Copiar texto"><i class="far fa-copy text-xl"></i></button>
                    </div>
                    
                    <div class="prose prose-invert max-w-none">
                        <div id="detail-desc" class="text-lg text-gray-400 font-medium mb-8 italic border-l-4 border-neon-orange pl-4">
                            Descri√ß√£o curta do procedimento.
                        </div>
                        
                        <div class="bg-dark-900 rounded-xl p-6 border border-dark-600 relative">
                            <div class="absolute -top-3 left-4 bg-dark-800 px-2 text-xs font-bold text-neon-cyan uppercase tracking-wider">Passo a Passo</div>
                            <div id="detail-body" class="content-area text-gray-300 whitespace-pre-line">
                                </div>
                        </div>

                        <div class="mt-8 p-4 bg-blue-500/5 border border-blue-500/20 rounded-lg flex gap-3 items-start">
                            <i class="fas fa-info-circle text-blue-400 mt-1"></i>
                            <p class="text-xs text-blue-300">Este procedimento deve ser seguido rigorosamente. Em caso de d√∫vida, consulte a coordena√ß√£o do setor.</p>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </main>

    <div id="toast-container" class="fixed bottom-6 right-6 flex flex-col gap-3 z-50 pointer-events-none"></div>
    <div id="footer-placeholder"></div>
    
    <script type="module" src="../assets/js/main.js"></script>

    <script>
        // DADOS COMPLETOS (Base Unificada)
        const procedures = [
            { id: 1, sector: 'secretaria', title: "Atendimento ao Aluno", desc: "Protocolo padr√£o de recep√ß√£o e triagem.", content: "1. **Verifica√ß√£o Inicial:** Abrir o IRC e consultar: Hist√≥rico Escolar, Notas Internas e Ficha Financeira.\n2. **Contexto:** Verificar hist√≥rico do DigiSac para entender tratativas anteriores.\n3. **Registro:** Todo atendimento deve ser registrado nas observa√ß√µes do aluno.\n4. **Postura:** Sempre confirmar dados antes de passar informa√ß√µes sens√≠veis." },
            { id: 2, sector: 'secretaria', title: "Solicita√ß√£o de Notas Antigas", desc: "Regras para recupera√ß√£o de notas retroativas.", content: "‚ö†Ô∏è **Regra de Ouro:** N√£o solicitamos aos professores notas de trabalhos entregues h√° mais de 3 meses.\n\n**A√ß√£o Corretiva:**\nSolicite que o aluno reenvie o trabalho diretamente para o e-mail da coordena√ß√£o: `coordenacao@unifahe.edu.br`.\nInforme o aluno sobre o prazo de corre√ß√£o (7 dias √∫teis)." },
            { id: 3, sector: 'secretaria', title: "Reposi√ß√£o de Aulas", desc: "Gest√£o de faltas e reposi√ß√µes.", content: "üîπ **Direito:** Todo aluno tem direito a 3 reposi√ß√µes gratuitas por curso.\nüîπ **Excedente:** A partir da 4¬™ reposi√ß√£o, cobrar taxa de R$ 250,00/aula.\nüîπ **Limite:** M√°ximo de 5 reposi√ß√µes totais. Acima disso, reprova√ß√£o por falta.\n\n**Procedimento:**\n1. Consultar planilha 'Escala 2025'.\n2. Verificar disponibilidade na turma desejada.\n3. Agendar no sistema e notificar o professor." },
            { id: 21, sector: 'secretaria', title: "Declara√ß√µes UNIFAHE", desc: "Emiss√£o em lote para parceiro.", content: "**Dados Necess√°rios:** Nome Completo, RG, CPF, Data In√≠cio, Per√≠odo Atual.\n\n**Fluxo:**\n1. Inserir dados na planilha de controle.\n2. Aguardar o lote do dia (16h).\n3. Enviar solicita√ß√£o unificada via WhatsApp para o setor de registros da UNIFAHE." },
            { id: 9, sector: 'financeiro', title: "Cancelamento de Matr√≠cula", desc: "C√°lculo de rescis√£o e multas.", content: "**Antes do In√≠cio das Aulas:**\n- Devolu√ß√£o de 80% do valor pago.\n- Reten√ß√£o de 20% (taxa administrativa).\n\n**Ap√≥s In√≠cio das Aulas:**\n- Cobran√ßa de multa de 20% sobre o saldo das parcelas vincendas (a vencer).\n- Exige carta de cancelamento de pr√≥prio punho assinada.\n- N√£o h√° devolu√ß√£o de valores j√° cursados." },
            { id: 5, sector: 'pedagogico', title: "Lan√ßamento de Notas (IRC)", desc: "Passo a passo t√©cnico.", content: "1. Acesse: **Secretaria > Di√°rio de Notas**.\n2. Selecione: Turma > Disciplina.\n3. Clique em **Gerar Lista de Notas**.\n4. Insira as notas manualmente.\n5. Clique em **Salvar** no final da p√°gina.\n\n‚ùó *Aten√ß√£o:* Verifique se a turma selecionada √© a correta antes de lan√ßar." },
            { id: 100, sector: 'ead', title: "Acesso ao Portal EAD", desc: "Suporte de primeiro n√≠vel.", content: "**Link:** `portal.unifahe.edu.br`\n**Login:** CPF do aluno (apenas n√∫meros).\n**Senha Padr√£o:** 123456 (solicitar troca no primeiro acesso).\n\nSe der erro 'Usu√°rio n√£o encontrado', verificar se a matr√≠cula est√° com status 'ATIVO' no IRC." },
            { id: 28, sector: 'contrato', title: "Assinatura de Contrato", desc: "Valida√ß√£o jur√≠dica.", content: "1. Abrir o documento no Clicksign.\n2. Pesquisar aluno no IRC.\n3. Se o curso j√° existir: Apenas assinar como testemunha.\n4. Se n√£o existir: Realizar matr√≠cula, gerar ficha financeira e depois assinar.\n5. Baixar c√≥pia assinada e salvar na pasta da turma no Drive." }
            // ... Adicionei apenas os principais para o exemplo, o c√≥digo aceita todos os 28+ que voc√™ tem
        ];

        let currentFilter = 'all';

        document.addEventListener('DOMContentLoaded', () => {
            renderNavList();
            
            // Busca
            document.getElementById('search-proc').addEventListener('keyup', (e) => {
                const term = e.target.value.toLowerCase();
                const filtered = procedures.filter(p => p.title.toLowerCase().includes(term) || p.content.toLowerCase().includes(term));
                renderNavList(filtered);
            });
        });

        function filterList(category) {
            currentFilter = category;
            // Atualiza visual dos bot√µes
            document.querySelectorAll('.filter-chip').forEach(btn => {
                if(btn.dataset.filter === category) {
                    btn.classList.remove('bg-dark-800', 'text-gray-400', 'border-dark-600');
                    btn.classList.add('bg-neon-orange', 'text-dark-900', 'border-transparent');
                } else {
                    btn.classList.add('bg-dark-800', 'text-gray-400', 'border-dark-600');
                    btn.classList.remove('bg-neon-orange', 'text-dark-900', 'border-transparent');
                }
            });

            if(category === 'all') renderNavList(procedures);
            else renderNavList(procedures.filter(p => p.sector === category));
        }

        function renderNavList(data = procedures) {
            const nav = document.getElementById('nav-list');
            nav.innerHTML = '';

            if(data.length === 0) {
                nav.innerHTML = '<p class="text-xs text-gray-600 p-4 text-center">Nada encontrado.</p>';
                return;
            }

            data.forEach(proc => {
                // Cores dos √≠cones
                let iconColor = 'text-gray-500';
                if(proc.sector === 'financeiro') iconColor = 'text-neon-cyan';
                if(proc.sector === 'secretaria') iconColor = 'text-neon-green';
                if(proc.sector === 'pedagogico') iconColor = 'text-neon-violet';
                if(proc.sector === 'contrato') iconColor = 'text-neon-orange';

                nav.innerHTML += `
                <div class="nav-item group" onclick="openContent(${proc.id}, this)">
                    <div class="flex items-center gap-3 overflow-hidden">
                        <i class="fas fa-file-alt ${iconColor} text-xs"></i>
                        <span class="truncate font-medium text-gray-300 group-hover:text-white transition">${proc.title}</span>
                    </div>
                    <i class="fas fa-chevron-right text-[10px] opacity-0 group-hover:opacity-100 transition text-neon-orange"></i>
                </div>`;
            });
        }

        function openContent(id, element) {
            // Highlight ativo
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            if(element) element.classList.add('active');

            const proc = procedures.find(p => p.id === id);
            if(!proc) return;

            // Preenche conte√∫do
            document.getElementById('content-placeholder').classList.add('hidden');
            document.getElementById('content-detail').classList.remove('hidden');
            
            // Cores do Badge
            const badge = document.getElementById('detail-badge');
            badge.innerText = proc.sector;
            badge.className = `badge-sector mb-3 inline-block uppercase tracking-widest font-bold px-2 py-1 rounded border bg-dark-900 border-dark-600 text-gray-400`; // Reset simples, pode colorir se quiser

            document.getElementById('detail-title').innerText = proc.title;
            document.getElementById('detail-desc').innerText = proc.desc;
            
            // Formata√ß√£o Rica do Corpo
            // Detecta listas e negritos simples
            let formattedBody = proc.content
                .replace(/\*\*(.*?)\*\*/g, '<strong class="text-neon-orange">$1</strong>') // Negrito Custom
                .replace(/\n/g, '<br>'); // Quebra de linha
            
            document.getElementById('detail-body').innerHTML = formattedBody;
        }

        function copyContent() {
            const text = document.getElementById('detail-body').innerText;
            navigator.clipboard.writeText(text).then(() => alert('Conte√∫do copiado!'));
        }
    </script>
</body>
</html>